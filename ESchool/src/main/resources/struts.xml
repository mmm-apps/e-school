<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN" "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
  <package name="default" namespace="/" extends="struts-default,json-default">
      
    <interceptors>
      <interceptor name="authenticationInterceptor" class="mmm.eschool.AuthenticationInterceptor"/>
    </interceptors>  
    
    <action name="" method="validateRequest" class="mmm.eschool.actions.Login">
      <result name="login">LoginPanel.jsp</result>
      <result name="input">LoginPanel.jsp</result>
      <result name="admin" type="redirectAction">admin</result>
      <result name="student" type="redirectAction">student</result>
      <result name="teacher" type="redirectAction">teacher</result>
      <result name="parent" type="redirectAction">parent</result>
    </action>
    
    <action name="login" class="mmm.eschool.actions.Login">
      <result>LoginPanel.jsp</result> 
      <result name="admin" type="redirectAction">admin</result>
      <result name="student" type="redirectAction">student</result>
      <result name="teacher" type="redirectAction">teacher</result>
      <result name="parent" type="redirectAction">parent</result>
      <result name="WrongUssPass" type="json">WrongUssPass</result>  
      <result name="login">LoginPanel.jsp</result>
      <result name="input">LoginPanel.jsp</result>
      <result name="error">ERROR.jsp</result>
    </action>
        
    <action name="logout" class="mmm.eschool.actions.Logout">
      <result name="success">LoginPanel.jsp</result>
      <result name="input">LoginPanel.jsp</result>
      <result name="login">LoginPanel.jsp</result>
      <result name="error">ERROR.jsp</result>
    </action>
            
    <action name="admin">
      <interceptor-ref name="authenticationInterceptor" />
      <result name="success">MainAdmin.jsp</result>
      <result name="input">MainAdmin.jsp</result>
      <result name="login">LoginPanel.jsp</result>
      <result name="error">ERROR.jsp</result>
    </action>

    <action name="student" class="mmm.eschool.actions.StudentProfile">
      <interceptor-ref name="authenticationInterceptor" />
      <result name="success">MainStudent.jsp</result>
      <result name="input">MainStudent.jsp</result>
      <result name="login">LoginPanel.jsp</result>
      <result name="error">ERROR.jsp</result>
    </action>

    <action name="teacher" class="mmm.eschool.actions.TeacherProfile">
      <result name="success" type="redirect">classesList</result>
      <result name="input" type="redirect">classesList</result>
      <result name="login">LoginPanel.jsp</result>
      <result name="error">ERROR.jsp</result>
    </action>
            
    <action name="parent" method="init" class="mmm.eschool.actions.ParentProfile">
      <interceptor-ref name="authenticationInterceptor" />
      <result name="success">MainParent.jsp</result>
      <result name="input">MainParent.jsp</result>
      <result name="login">LoginPanel.jsp</result>
      <result name="error">ERROR.jsp</result>
    </action> 
    
    <!-- BEGIN OF USER ACTIONS -->
    <action name="createUser" method="add" class="mmm.eschool.actions.UserActions">
      <result name="success" type="redirect">listUser</result>
      <result name="input" type="redirect">listUser</result>
      <result name="error">ERROR.jsp</result>
    </action>
    
    <action name="listUser" method="list" class="mmm.eschool.actions.UserActions">
      <result name="success">Users.jsp</result>
      <result name="input">Users.jsp</result>
    </action>
        
    <action name="deleteUser" method="delete" class="mmm.eschool.actions.UserActions">
      <result name="success" type="redirect">listUser</result>
      <result name="input" type="redirect">listUser</result>
    </action>
    
    <action name="editConfirmUser" method="edit" class="mmm.eschool.actions.UserActions">
      <result name="success" type="redirect">listUser</result>
      <result name="input" type="redirect">listUser</result>
    </action>
    <!-- END OF USER ACTIONS -->
    
    <!-- BEGIN OF TEACHER ACTIONS --> 
    <action name="teacherSubjectsList" method="list" class="mmm.eschool.actions.TeacherActions">
      <result name="success">TeacherSubjects.jsp</result>
    </action> 
    
    <action name="addSubjectToTeacher" class="mmm.eschool.actions.TeacherActions">
      <result name="success" type="redirect">teacherSubjectsList</result>
      <result name="input" type="redirect">teacherSubjectsList</result>
      <result name="error">ERROR.jsp</result>
    </action>
                  
    <action name="deleteTeacherSubject" method="delete" class="mmm.eschool.actions.TeacherActions">
      <result name="success" type="redirect">teacherSubjectsList</result>
    </action>
        
    <action name="changeStudentParent" method="list" class="mmm.eschool.actions.TeacherActions">
      <result name="success">ChangeParent.jsp</result>
    </action>
    
    <action name="setNewStudentParent" method="setNewStudentParent" class="mmm.eschool.actions.TeacherActions">
        <result name="success" type="redirect">classesList</result>
    </action>
    
    <action name="deleteStudentParent" method="deleteStudentParent" class="mmm.eschool.actions.TeacherActions">
        <result name="success" type="redirect">classesList</result>
    </action>
    <!-- END OF TEACHER ACTIONS --> 
    
    <!-- BEGIN OF CLASS ACTIONS --> 
    <action name="classesList" method="list" class="mmm.eschool.actions.ClassActions">
      <result name="success">Classes.jsp</result>
    </action>
                   
    <action name="addClass" method="addClass" class="mmm.eschool.actions.ClassActions">
      <result name="success" type="redirect">classesList</result>
      <result name="input">Classes.jsp</result>
      <result name="error">Classes.jsp</result>
    </action>
    
    <action name="deleteClass" method="deleteClass" class="mmm.eschool.actions.ClassActions">
        <result name="success" type="redirect">classesList</result>
        <result name="input" type="redirect" >classesList</result>
    </action>
    
    <action name="showClassSubjects" method="getClassSubjects" class="mmm.eschool.actions.ClassActions">
      <result name="success">ClassSubjects.jsp</result>
    </action>
    
    <action name="showClassStudents" method="getClassStudents" class="mmm.eschool.actions.ClassActions">
      <result name="success">Students.jsp</result>
    </action>
    
    <action name="changeStudentClass" method="changeStudentClass" class="mmm.eschool.actions.ClassActions">
      <result name="success" type="redirect">classesList</result> 
    </action>
    <!-- END OF CLASS ACTIONS -->  
    
    <!-- BEGIN OF HOMEWORK ACTIONS -->  
    <action name="addHomework" method="initClassHomeworks" class="mmm.eschool.actions.HomeworkActions">
      <result name="success">Homeworks.jsp</result>
    </action>
    
    <action name="addHomeworkToClass" class="mmm.eschool.actions.HomeworkActions">
      <result name="input">Homeworks.jsp</result>
      <result name="none">Homeworks.jsp</result>
      <result name="success" type="redirect">classesList</result>
    </action>
    
    <action name="deleteHomework" method="deleteHomework" class="mmm.eschool.actions.HomeworkActions">
      <result name="success" type="redirect">classesList</result>
    </action>  
    <!-- END OF HOMEWORK ACTIONS -->  
    
    <!-- BEGIN OF REMARK ACTIONS -->
    <action name="remarks" method="init" class="mmm.eschool.actions.RemarkActions">
      <result name="success">Remarks.jsp</result>
    </action>

    <action name="addRemark" class="mmm.eschool.actions.RemarkActions">
      <result name="success" type="redirect">remarks</result>
      <result name="input">Remarks.jsp</result>
      <result name="error" type="redirect">classesList</result>
    </action>
    
    <action name="deleteRemark" method="deleteRemark" class="mmm.eschool.actions.RemarkActions">
      <result name="success" type="redirect">remarks</result>
    </action>
    <!-- END OF REMARK ACTIONS -->
    
    <!-- BEGIN OF MARK ACTIONS -->
    <action name="studentMarks" method="studentMarksList" class="mmm.eschool.actions.MarkActions">
     <result name="success">Marks.jsp</result>
    </action>
    
    <action name="addMark" method="addMark" class = "mmm.eschool.actions.MarkActions">
      <result name="success" type="redirect">studentMarks</result>
      <result name="input">Marks.jsp</result>
    </action>
    
    <action name="delMark" method="delMark" class="mmm.eschool.actions.MarkActions">
      <result name="success" type="redirect">studentMarks</result>
      <result name="input" type="redirect">studentMarks</result>
    </action>  
    <!-- END OF MARK ACTIONS -->
    
    <!-- BEGIN OF ABSENCE ACTIONS -->
    <action name="absencesList" method="absencesList" class="mmm.eschool.actions.AbsencesActions">
      <result name="success">Absences.jsp</result>
    </action>
    
    <action name="addAbsence" method="addAbsence" class="mmm.eschool.actions.AbsencesActions">
      <result name="success" type="redirect">absencesList</result>
      <result name="input" type="redirect">absencesList</result>
    </action>
    
    <action name="excuseAbsence" method="excuseAbsence" class="mmm.eschool.actions.AbsencesActions">
      <result name="success" type="redirect">classesList</result>
    </action>
    
    <action name="deleteAbsence" method="deleteAbsence" class="mmm.eschool.actions.AbsencesActions">
      <result name="success" type="redirect">absencesList</result>
    </action>  
    <!-- END OF ABSENCE ACTIONS -->
    
    <!-- BEGIN OF SUBJECT ACTIONS -->
    <action name="listSubject" method="list" class="mmm.eschool.actions.SubjectActions">
      <result name="success">Subjects.jsp</result>
    </action>
        
    <action name="addSubject" method="addSubject" class="mmm.eschool.actions.SubjectActions">
      <result name="success" type="redirect">listSubject</result>
      <result name="input">Subjects.jsp</result>
      <result name="error">ERROR.jsp</result>
    </action>
    
    <action name="deleteSubject" method="delete" class="mmm.eschool.actions.SubjectActions">
      <result name="success" type="redirect">listSubject</result>
      <result name="input" type="redirect">listSubject</result>
    </action>
    <!-- END OF SUBJECT ACTIONS -->  
    
    <action name="viewChild" class="mmm.eschool.actions.ParentProfile">
      <result name="success">MainStudent.jsp</result>
      <result name="input">MainStudent.jsp</result>
      <result name="login">LoginPanel.jsp</result>
      <result name="error">ERROR.jsp</result>
    </action>
        
  </package>
  <constant name="struts.ui.theme" value="simple" />
  <constant name="struts.action.extension" value=""/>
  <constant name="struts.action.excludePattern" value="/index.html,/Images/.*,/JS/.*,/CSS/.*"/>
</struts>

